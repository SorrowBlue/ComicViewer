name: Update Licenses
on:
  push:
    branches:
      - main
permissions:
  contents: write
  pull-requests: write
jobs:
  update-licenses:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6
      - name: Setup JDK and Gradle
        uses: ./.github/actions/setup-java-gradle
      - name: ü§ñ ExportLibraryDefinitions for android
        run: ./gradlew :app:android:exportLibraryDefinitions
      - name: üñ•Ô∏è ExportLibraryDefinitions for jvm
        run: ./gradlew :app:jvm:exportLibraryDefinitions
      - name: üçé ExportLibraryDefinitions for ios
        run: ./gradlew :app:ios:exportLibraryDefinitions

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v8
        with:
          title: 'Update aboutlibraries.json'
          body: 'This PR updates the aboutlibraries.json'
          base: main
          branch: chore/update-licenses
          assignees: 'SorrowBlue'
          reviewers: 'SorrowBlue,Copilot'
          labels: ':robot:create-pull-request'
          commit-message: 'Update aboutlibraries.json'
